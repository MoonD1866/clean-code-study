# 05장 형식 맞추기

## 형식을 맞추는 목적

- 오늘 구현한 기능이 다음 버전에서 바뀔 확률이 높은

- 가독성이 바뀔 코드의 품질에 지대한 영향

- 맨 처음 잡아놓은 구현 스타일과 가독성 수준은 유지보수 용이성과 확장성에 계속 영향

- 원래 코드가 사라져도 개발자의 스타일과 규율은 사라지지 않는다

## 적절한 행 길이를 유지하라

- 큰 파일보다 작은 파일이 이해하기 쉽다.

## 신문 기사처럼 작성하라

- 이름은 간단하면서 설명이 가능하게 짓기

- 소스 파일 첫 부분은 고차원 개념과 알고리즘을 설명

- 마지막에는 가장 저차원 함수와 세부 내역

## 개념은 빈 행으로 분지

- 생각 사이는 빈 행을 넣어 분리

- 빈 행은 새로운 개념을 시작한다는 시각적 단서

- 줄바꿈은 개념을 분리

## 세로 밀집도

- 세로 밀집도는 연관성을 의미

- 서로 밀접한 코드 행은 세로로 가까이 놓여야 한다.

## 수직 거리

- 서로 밀접한 개념은 세로로 가까이 둬야 함

- 타당한 근거가 없다면 서로 밀접한 개념은 한 파일에 속해야 마땅함

## 변수 선언
- 변수는 사용하는 위치에 최대한 가까이 선언

- 지역 변수는 각 함수 맨 처음에 선언

- 루프를 제어하는 변수는 루프 문 내부에 선언(예시가 이해 안됨)

- 다소 긴 함수에서 블록 상단이나 루프 직전에 변수를 선언

## 인스턴스 변수

- 클래스 맨 처음에 선언

- 변수 간에 세로로 거리를 두지 않음

- C에서는 맨 아래에 선언하기도 하기 때문에 잘 알려진 위치에 인스턴스 변수를 모은다는 것이 중요

## 종속 함수

- 한 함수가 다른 함수를 호출한다면 두 함수는 세로로 가까이 배치

- 출하는 함수를 호출되는 함수보다 먼저 배치

- 규칙을 일관적으로 적용한다면 독자는 방금 호출한 함수가 잠시 후에 정의되리라는 사실을 예측

- 상수를 알아야 마땅한 함수에서 실제로 사용하는 함수로 상수를 넘겨주는 방법이 더 좋음
```java
public Response makeResponse(FitNesseContext context, Request request)throws Exception {
  String pageName = getPageNameOrDefault (request, "FrontPage");
  loadPage (pageName, context);
  if (page = null)
    return notFoundResponse(context, request);
  else
    return makePageResponse(context);
}
```

## 개념적 유사성
- 친화도가 높을수록 코드를 가까이 배치

  - 친화도가 높은 요인
    
    - 수가 다른 함수를 호출해 생기는 경우

    - 변수와 그 변수를 사용하는 함수도

    - 비슷한 동작을 수행하는 일군의 함수
      - 종속적인 관계가 없더라도 가까이 배치할 함수들

## 세로 순서

- 함수 호출 종속성은 아래 방향으로 유지

- 소스 코드 모듈이 고차원에서 저차원으로 자연스럽게 내려감

## 가로 형식 맞추기
- 프로그래머는 명백하게 짧은 행을 선호

### 가로 공백과 밀집도
- 가로로는 공백을 사용해 밀접한 개념과 느슨한 개념을 표현
  - 연산자 강조
  - 연산자 우선순위 강조

### 들여쓰기

- 범위로 이뤄진 계층을 표현하기 위해 들여쓰기 사용

## 팀 규칙
- 팀은 한 가지 규칙에 합의해야 함