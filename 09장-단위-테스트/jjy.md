# 09장 단위 테스트
## TDD 법칙 세 가지

1. 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않음.

2. 컴파일을 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성

3. 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성

&nbsp;
 위와 같은 방법을 철저하게 지키게 된다면 실제 코드와 맞먹을 정도로 방대한 테스트 코드가 발생하게 되는데 이는 심각한 관리 문제를 유발하기도 한다.
<br>

## 깨끗한 테스트 코드 유지하기
&nbsp;
 실제 코드가 진화하면 테스트 코드도 변해야 한다. 
그런데 테스트 코드가 지저분할수록 변경하기 어려워 진다.
테스트 코드가 복잡할수록 실제 코드를 짜는 시간보다 테스트 케이스를 추가하는 시간이 더 걸리기 쉽상이다.
<br>

&nbsp;
 그렇다고 테스트 슈트가 없다면 시스템을 일부 수정했을 때 다른 곳에서 문제가 생기지 않을 것이라고 보장할 수 없어진다.
그렇게 때문에 결함율이 높아지기 시작한다.
<br>

&nbsp;
 테스트 코드는 실제 코드 못지 않게 중요하다.
테스트 코드는 사고와 설계와 주의가 필요하다. 실제 코드 못지 않게 깨끗하게 짜야한다.
<br>

### 테스트는 유연성, 유지 보수성, 재사용성을 제공한다
&nbsp;
 코드에 유연성, 유지보수성, 재사용성을 제공하는 버팀목이 바로 단위 테스트다.
테스트 케이스가 없다면 모든 변경이 잠정적인 버그다.
<br>

&nbsp;
 코드를 점검하는 자동화된 탄위 테스트 슈트는 설계와 아키텍처를 최대한 깨끗하게 보존하는 열쇠다. 테스트 케이가 있으면 변경이 쉬워지기 때문이다.
<br>


## 깨끗한 테스트 코드
&nbsp;
 깨끗한 테스트 코드의 가장 중요한 점은 바로 가독성이다. 어쩌면 가독성은 실제 코드보다 테스트 코드에 더울 중요하다.
이 가독성을 높이려면 명료성, 단수성, 풍부한 표현력이 필요하다.
<br>

&nbsp;
 테스트 코드는 본론에 돌입해 진짜 필요한 자료 유형과 함수만 사용해야한다. 
그래야 코드를 읽는 사람이 온갖 잡다하고 세세한 코드에 주눅들고 헷갈릴 필요 없이 코드가 수행하는 기능이을 재빨리 이해한다.
<br>


### 이중 표준
&nbsp;
 테스트 API코드에 적용하는 표준은 실제 코드에 적용하는 표준과 확실히 다르다.
단순히 간결하고, 표현력이 풍부해야 하지만, 실제 코드만큼 효율적일 필요는 없다.
이는 실제 환경이 아니라 테스트 환경에서 돌아가는 코드이기 때문이다. 
실제 환경과 테스트 환경은 요구사항이 판이하게 다르다.
<br>

&nbsp;
 
<br>
 실제 동작 상황에서는 컴퓨터 자원과 메모리가 제한적일 가능성이 높다. 
하지만 테스트 환경은 자원이 제한적일 가능성이 낮다.
&nbsp;

<br>

&nbsp;
 이것이 이중 표준의 본질이다. 
실제 환경에서는 절대로 안 되지만 테스트 환경에서는 전혀 문제없는 방식이 있다. 
대개 메모리나 CPU 효율과 관련 있는 경우다. 
코드의 깨끗함과는 철저히 무관하다.
<br>

## 테스트 당 assert 하나
&nbsp;
 테스트 코드를 짤 때는 함수마다 assert 문을 단 하나만 사용해야 한다는 의견이 있다.
하지만 그러기 위해 테스트를 분리하면 중복되는 코드가 많아진다.
<br>

&nbsp;
 하나의 assert 문에 집착하기 보다는 assert문을 최소한으로 만들어야 한다는 의식을 가지는 것이 더 좋은 거 같다.
<br>

&nbsp;
 위 법칙보다는 테스트 함수마다 한 개념만 테스트하라는 규칙이 더 좋다고 생각한다.
<br>

## F.I.R.S.T.
&nbsp;
 깨끗한 테스트는 다음 다섯 가지 규칙을 따른다. 
<br>

- 빠르게(Fast): 테스트는 빨라야 한다. 느리다면 자주 돌릴 엄두를 못 낸다.

- 독립적으로(Independent): 각 테스트는 위존하면 안된다. 한 테스트가 다음 테스트의 준비가 되어서는 안된다. 어떤 순서로 실행해도 괜찮아야 한다. 의존한다면 실패의 원인을 찾기 어려워진다.

- 반복가능하게(Repeatable): 어떤 환경에서도 반복이 가능해야 한다.

- 자가검증하는(Self-Validating): 테스트는 bool 값으로 결과를 내야한다. 성공 아니면 실패이다. 여부를 알기 위해서 로그 파일을 읽게 만들어서느 안된다.

- 적시에(Timely): 테스트는 적시에 작성해야 한다. 실제 코드를 구현하기 직전에 구현해야 한다.
